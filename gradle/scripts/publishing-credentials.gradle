import org.codehaus.groovy.runtime.MethodClosure

private List<String> getCredentialsFile() {
	// I would cache this but Groovy is such a fucking weird language and IJ is shitty
	def f = file('maven-publishing.credentials')
	if(f.exists() && f.canRead())
		return f.readLines()
	else
		return new ArrayList(0)
}

String getMavenUsername() {
	def file = getCredentialsFile()
	if(file.size() > 0 && file[0].length() > 0)
		return file[0]
	else
		return propertyString('mavenUser')
}

String getMavenPassword() {
	def file = getCredentialsFile()
	if(file.size() > 1 && file[1].length() > 0)
		return file[1]
	else
		return propertyString('mavenPassword')
}

ext.getMavenUsername = this.&getMavenUsername as MethodClosure
ext.getMavenPassword = this.&getMavenPassword as MethodClosure
